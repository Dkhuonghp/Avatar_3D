import{setup as T}from"..";import{tw as g}from"..";var l=new WeakMap,M=t=>{let e=l.get(t);return e||(e=new Map,l.set(t,e)),e},f=({tw:t=g}={})=>{let e=M(t),h=({target:n,addedNodes:d})=>{var c;let i=(c=n.getAttribute)==null?void 0:c.call(n,"class");if(i){let r=e.get(i);r||(r=t(i),e.set(i,r),e.size>1e4&&e.delete(e.keys().next().value)),i!==r&&n.setAttribute("class",r)}for(let r=d.length;r--;){let u=d[r];o([{target:u,addedNodes:u.children||[]}])}},o=n=>n.forEach(h),a=new MutationObserver(o);return{observe(n){return o([{target:n,addedNodes:[n]}]),a.observe(n,{attributes:!0,attributeFilter:["class"],subtree:!0,childList:!0}),this},disconnect(){return a.disconnect(),this}}},s=()=>{let t=document.querySelector('script[type="twind-config"]');m(t?JSON.parse(t.innerHTML):{})};document.readyState==="loading"?addEventListener("DOMContentLoaded",s):v=setTimeout(s);var v,p=f(),b=()=>{removeEventListener("DOMContentLoaded",s),clearTimeout(v),p.disconnect()},m=({target:t=document.documentElement,...e}={})=>{Object.keys(e).length&&T(e),b(),p.observe(t),t.hidden=!1};export{b as disconnect,m as setup};
//# sourceMappingURL=shim.js.map
