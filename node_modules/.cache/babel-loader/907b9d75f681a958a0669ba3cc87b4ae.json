{"ast":null,"code":"import { EventDispatcher, MOUSE, Quaternion, Vector2, Vector3 } from \"../../../build/three.module.js\";\n\nvar TrackballControls = function TrackballControls(object, domElement) {\n  if (domElement === undefined) console.warn('THREE.TrackballControls: The second parameter \"domElement\" is now mandatory.');\n  if (domElement === document) console.error('THREE.TrackballControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n  var scope = this;\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    ZOOM: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_ZOOM_PAN: 4\n  };\n  this.object = object;\n  this.domElement = domElement; // API\n\n  this.enabled = true;\n  this.screen = {\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0\n  };\n  this.rotateSpeed = 1.0;\n  this.zoomSpeed = 1.2;\n  this.panSpeed = 0.3;\n  this.noRotate = false;\n  this.noZoom = false;\n  this.noPan = false;\n  this.staticMoving = false;\n  this.dynamicDampingFactor = 0.2;\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n  this.keys = [65\n  /*A*/\n  , 83\n  /*S*/\n  , 68\n  /*D*/\n  ];\n  this.mouseButtons = {\n    LEFT: MOUSE.ROTATE,\n    MIDDLE: MOUSE.ZOOM,\n    RIGHT: MOUSE.PAN\n  }; // internals\n\n  this.target = new Vector3();\n  var EPS = 0.000001;\n  var lastPosition = new Vector3();\n  var lastZoom = 1;\n\n  var _state = STATE.NONE,\n      _keyState = STATE.NONE,\n      _eye = new Vector3(),\n      _movePrev = new Vector2(),\n      _moveCurr = new Vector2(),\n      _lastAxis = new Vector3(),\n      _lastAngle = 0,\n      _zoomStart = new Vector2(),\n      _zoomEnd = new Vector2(),\n      _touchZoomDistanceStart = 0,\n      _touchZoomDistanceEnd = 0,\n      _panStart = new Vector2(),\n      _panEnd = new Vector2(); // for reset\n\n\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.up0 = this.object.up.clone();\n  this.zoom0 = this.object.zoom; // events\n\n  var changeEvent = {\n    type: 'change'\n  };\n  var startEvent = {\n    type: 'start'\n  };\n  var endEvent = {\n    type: 'end'\n  }; // methods\n\n  this.handleResize = function () {\n    var box = scope.domElement.getBoundingClientRect(); // adjustments come from similar code in the jquery offset() function\n\n    var d = scope.domElement.ownerDocument.documentElement;\n    scope.screen.left = box.left + window.pageXOffset - d.clientLeft;\n    scope.screen.top = box.top + window.pageYOffset - d.clientTop;\n    scope.screen.width = box.width;\n    scope.screen.height = box.height;\n  };\n\n  var getMouseOnScreen = function () {\n    var vector = new Vector2();\n    return function getMouseOnScreen(pageX, pageY) {\n      vector.set((pageX - scope.screen.left) / scope.screen.width, (pageY - scope.screen.top) / scope.screen.height);\n      return vector;\n    };\n  }();\n\n  var getMouseOnCircle = function () {\n    var vector = new Vector2();\n    return function getMouseOnCircle(pageX, pageY) {\n      vector.set((pageX - scope.screen.width * 0.5 - scope.screen.left) / (scope.screen.width * 0.5), (scope.screen.height + 2 * (scope.screen.top - pageY)) / scope.screen.width // screen.width intentional\n      );\n      return vector;\n    };\n  }();\n\n  this.rotateCamera = function () {\n    var axis = new Vector3(),\n        quaternion = new Quaternion(),\n        eyeDirection = new Vector3(),\n        objectUpDirection = new Vector3(),\n        objectSidewaysDirection = new Vector3(),\n        moveDirection = new Vector3(),\n        angle;\n    return function rotateCamera() {\n      moveDirection.set(_moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0);\n      angle = moveDirection.length();\n\n      if (angle) {\n        _eye.copy(scope.object.position).sub(scope.target);\n\n        eyeDirection.copy(_eye).normalize();\n        objectUpDirection.copy(scope.object.up).normalize();\n        objectSidewaysDirection.crossVectors(objectUpDirection, eyeDirection).normalize();\n        objectUpDirection.setLength(_moveCurr.y - _movePrev.y);\n        objectSidewaysDirection.setLength(_moveCurr.x - _movePrev.x);\n        moveDirection.copy(objectUpDirection.add(objectSidewaysDirection));\n        axis.crossVectors(moveDirection, _eye).normalize();\n        angle *= scope.rotateSpeed;\n        quaternion.setFromAxisAngle(axis, angle);\n\n        _eye.applyQuaternion(quaternion);\n\n        scope.object.up.applyQuaternion(quaternion);\n\n        _lastAxis.copy(axis);\n\n        _lastAngle = angle;\n      } else if (!scope.staticMoving && _lastAngle) {\n        _lastAngle *= Math.sqrt(1.0 - scope.dynamicDampingFactor);\n\n        _eye.copy(scope.object.position).sub(scope.target);\n\n        quaternion.setFromAxisAngle(_lastAxis, _lastAngle);\n\n        _eye.applyQuaternion(quaternion);\n\n        scope.object.up.applyQuaternion(quaternion);\n      }\n\n      _movePrev.copy(_moveCurr);\n    };\n  }();\n\n  this.zoomCamera = function () {\n    var factor;\n\n    if (_state === STATE.TOUCH_ZOOM_PAN) {\n      factor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n      _touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n      if (scope.object.isPerspectiveCamera) {\n        _eye.multiplyScalar(factor);\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.zoom *= factor;\n        scope.object.updateProjectionMatrix();\n      } else {\n        console.warn('THREE.TrackballControls: Unsupported camera type');\n      }\n    } else {\n      factor = 1.0 + (_zoomEnd.y - _zoomStart.y) * scope.zoomSpeed;\n\n      if (factor !== 1.0 && factor > 0.0) {\n        if (scope.object.isPerspectiveCamera) {\n          _eye.multiplyScalar(factor);\n        } else if (scope.object.isOrthographicCamera) {\n          scope.object.zoom /= factor;\n          scope.object.updateProjectionMatrix();\n        } else {\n          console.warn('THREE.TrackballControls: Unsupported camera type');\n        }\n      }\n\n      if (scope.staticMoving) {\n        _zoomStart.copy(_zoomEnd);\n      } else {\n        _zoomStart.y += (_zoomEnd.y - _zoomStart.y) * this.dynamicDampingFactor;\n      }\n    }\n  };\n\n  this.panCamera = function () {\n    var mouseChange = new Vector2(),\n        objectUp = new Vector3(),\n        pan = new Vector3();\n    return function panCamera() {\n      mouseChange.copy(_panEnd).sub(_panStart);\n\n      if (mouseChange.lengthSq()) {\n        if (scope.object.isOrthographicCamera) {\n          var scale_x = (scope.object.right - scope.object.left) / scope.object.zoom / scope.domElement.clientWidth;\n          var scale_y = (scope.object.top - scope.object.bottom) / scope.object.zoom / scope.domElement.clientWidth;\n          mouseChange.x *= scale_x;\n          mouseChange.y *= scale_y;\n        }\n\n        mouseChange.multiplyScalar(_eye.length() * scope.panSpeed);\n        pan.copy(_eye).cross(scope.object.up).setLength(mouseChange.x);\n        pan.add(objectUp.copy(scope.object.up).setLength(mouseChange.y));\n        scope.object.position.add(pan);\n        scope.target.add(pan);\n\n        if (scope.staticMoving) {\n          _panStart.copy(_panEnd);\n        } else {\n          _panStart.add(mouseChange.subVectors(_panEnd, _panStart).multiplyScalar(scope.dynamicDampingFactor));\n        }\n      }\n    };\n  }();\n\n  this.checkDistances = function () {\n    if (!scope.noZoom || !scope.noPan) {\n      if (_eye.lengthSq() > scope.maxDistance * scope.maxDistance) {\n        scope.object.position.addVectors(scope.target, _eye.setLength(scope.maxDistance));\n\n        _zoomStart.copy(_zoomEnd);\n      }\n\n      if (_eye.lengthSq() < scope.minDistance * scope.minDistance) {\n        scope.object.position.addVectors(scope.target, _eye.setLength(scope.minDistance));\n\n        _zoomStart.copy(_zoomEnd);\n      }\n    }\n  };\n\n  this.update = function () {\n    _eye.subVectors(scope.object.position, scope.target);\n\n    if (!scope.noRotate) {\n      scope.rotateCamera();\n    }\n\n    if (!scope.noZoom) {\n      scope.zoomCamera();\n    }\n\n    if (!scope.noPan) {\n      scope.panCamera();\n    }\n\n    scope.object.position.addVectors(scope.target, _eye);\n\n    if (scope.object.isPerspectiveCamera) {\n      scope.checkDistances();\n      scope.object.lookAt(scope.target);\n\n      if (lastPosition.distanceToSquared(scope.object.position) > EPS) {\n        scope.dispatchEvent(changeEvent);\n        lastPosition.copy(scope.object.position);\n      }\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.lookAt(scope.target);\n\n      if (lastPosition.distanceToSquared(scope.object.position) > EPS || lastZoom !== scope.object.zoom) {\n        scope.dispatchEvent(changeEvent);\n        lastPosition.copy(scope.object.position);\n        lastZoom = scope.object.zoom;\n      }\n    } else {\n      console.warn('THREE.TrackballControls: Unsupported camera type');\n    }\n  };\n\n  this.reset = function () {\n    _state = STATE.NONE;\n    _keyState = STATE.NONE;\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.up.copy(scope.up0);\n    scope.object.zoom = scope.zoom0;\n    scope.object.updateProjectionMatrix();\n\n    _eye.subVectors(scope.object.position, scope.target);\n\n    scope.object.lookAt(scope.target);\n    scope.dispatchEvent(changeEvent);\n    lastPosition.copy(scope.object.position);\n    lastZoom = scope.object.zoom;\n  }; // listeners\n\n\n  function onPointerDown(event) {\n    if (scope.enabled === false) return;\n\n    switch (event.pointerType) {\n      case 'mouse':\n      case 'pen':\n        onMouseDown(event);\n        break;\n      // TODO touch\n    }\n  }\n\n  function onPointerMove(event) {\n    if (scope.enabled === false) return;\n\n    switch (event.pointerType) {\n      case 'mouse':\n      case 'pen':\n        onMouseMove(event);\n        break;\n      // TODO touch\n    }\n  }\n\n  function onPointerUp(event) {\n    if (scope.enabled === false) return;\n\n    switch (event.pointerType) {\n      case 'mouse':\n      case 'pen':\n        onMouseUp(event);\n        break;\n      // TODO touch\n    }\n  }\n\n  function keydown(event) {\n    if (scope.enabled === false) return;\n    window.removeEventListener('keydown', keydown);\n\n    if (_keyState !== STATE.NONE) {\n      return;\n    } else if (event.keyCode === scope.keys[STATE.ROTATE] && !scope.noRotate) {\n      _keyState = STATE.ROTATE;\n    } else if (event.keyCode === scope.keys[STATE.ZOOM] && !scope.noZoom) {\n      _keyState = STATE.ZOOM;\n    } else if (event.keyCode === scope.keys[STATE.PAN] && !scope.noPan) {\n      _keyState = STATE.PAN;\n    }\n  }\n\n  function keyup() {\n    if (scope.enabled === false) return;\n    _keyState = STATE.NONE;\n    window.addEventListener('keydown', keydown, false);\n  }\n\n  function onMouseDown(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (_state === STATE.NONE) {\n      switch (event.button) {\n        case scope.mouseButtons.LEFT:\n          _state = STATE.ROTATE;\n          break;\n\n        case scope.mouseButtons.MIDDLE:\n          _state = STATE.ZOOM;\n          break;\n\n        case scope.mouseButtons.RIGHT:\n          _state = STATE.PAN;\n          break;\n\n        default:\n          _state = STATE.NONE;\n      }\n    }\n\n    var state = _keyState !== STATE.NONE ? _keyState : _state;\n\n    if (state === STATE.ROTATE && !scope.noRotate) {\n      _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n\n      _movePrev.copy(_moveCurr);\n    } else if (state === STATE.ZOOM && !scope.noZoom) {\n      _zoomStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n\n      _zoomEnd.copy(_zoomStart);\n    } else if (state === STATE.PAN && !scope.noPan) {\n      _panStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n\n      _panEnd.copy(_panStart);\n    }\n\n    scope.domElement.ownerDocument.addEventListener('pointermove', onPointerMove, false);\n    scope.domElement.ownerDocument.addEventListener('pointerup', onPointerUp, false);\n    scope.dispatchEvent(startEvent);\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n    event.stopPropagation();\n    var state = _keyState !== STATE.NONE ? _keyState : _state;\n\n    if (state === STATE.ROTATE && !scope.noRotate) {\n      _movePrev.copy(_moveCurr);\n\n      _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n    } else if (state === STATE.ZOOM && !scope.noZoom) {\n      _zoomEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n    } else if (state === STATE.PAN && !scope.noPan) {\n      _panEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n    }\n  }\n\n  function onMouseUp(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n    event.stopPropagation();\n    _state = STATE.NONE;\n    scope.domElement.ownerDocument.removeEventListener('pointermove', onPointerMove);\n    scope.domElement.ownerDocument.removeEventListener('pointerup', onPointerUp);\n    scope.dispatchEvent(endEvent);\n  }\n\n  function mousewheel(event) {\n    if (scope.enabled === false) return;\n    if (scope.noZoom === true) return;\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.deltaMode) {\n      case 2:\n        // Zoom in pages\n        _zoomStart.y -= event.deltaY * 0.025;\n        break;\n\n      case 1:\n        // Zoom in lines\n        _zoomStart.y -= event.deltaY * 0.01;\n        break;\n\n      default:\n        // undefined, 0, assume pixels\n        _zoomStart.y -= event.deltaY * 0.00025;\n        break;\n    }\n\n    scope.dispatchEvent(startEvent);\n    scope.dispatchEvent(endEvent);\n  }\n\n  function touchstart(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    switch (event.touches.length) {\n      case 1:\n        _state = STATE.TOUCH_ROTATE;\n\n        _moveCurr.copy(getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n\n        _movePrev.copy(_moveCurr);\n\n        break;\n\n      default:\n        // 2 or more\n        _state = STATE.TOUCH_ZOOM_PAN;\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        _touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n        var x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n        var y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n\n        _panStart.copy(getMouseOnScreen(x, y));\n\n        _panEnd.copy(_panStart);\n\n        break;\n    }\n\n    scope.dispatchEvent(startEvent);\n  }\n\n  function touchmove(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.touches.length) {\n      case 1:\n        _movePrev.copy(_moveCurr);\n\n        _moveCurr.copy(getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n\n        break;\n\n      default:\n        // 2 or more\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        _touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n        var x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n        var y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n\n        _panEnd.copy(getMouseOnScreen(x, y));\n\n        break;\n    }\n  }\n\n  function touchend(event) {\n    if (scope.enabled === false) return;\n\n    switch (event.touches.length) {\n      case 0:\n        _state = STATE.NONE;\n        break;\n\n      case 1:\n        _state = STATE.TOUCH_ROTATE;\n\n        _moveCurr.copy(getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n\n        _movePrev.copy(_moveCurr);\n\n        break;\n    }\n\n    scope.dispatchEvent(endEvent);\n  }\n\n  function contextmenu(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n  }\n\n  this.dispose = function () {\n    scope.domElement.removeEventListener('contextmenu', contextmenu, false);\n    scope.domElement.removeEventListener('pointerdown', onPointerDown, false);\n    scope.domElement.removeEventListener('wheel', mousewheel, false);\n    scope.domElement.removeEventListener('touchstart', touchstart, false);\n    scope.domElement.removeEventListener('touchend', touchend, false);\n    scope.domElement.removeEventListener('touchmove', touchmove, false);\n    scope.domElement.ownerDocument.removeEventListener('pointermove', onPointerMove, false);\n    scope.domElement.ownerDocument.removeEventListener('pointerup', onPointerUp, false);\n    window.removeEventListener('keydown', keydown, false);\n    window.removeEventListener('keyup', keyup, false);\n  };\n\n  this.domElement.addEventListener('contextmenu', contextmenu, false);\n  this.domElement.addEventListener('pointerdown', onPointerDown, false);\n  this.domElement.addEventListener('wheel', mousewheel, false);\n  this.domElement.addEventListener('touchstart', touchstart, false);\n  this.domElement.addEventListener('touchend', touchend, false);\n  this.domElement.addEventListener('touchmove', touchmove, false);\n  this.domElement.ownerDocument.addEventListener('pointermove', onPointerMove, false);\n  this.domElement.ownerDocument.addEventListener('pointerup', onPointerUp, false);\n  window.addEventListener('keydown', keydown, false);\n  window.addEventListener('keyup', keyup, false);\n  this.handleResize(); // force an update at start\n\n  this.update();\n};\n\nTrackballControls.prototype = Object.create(EventDispatcher.prototype);\nTrackballControls.prototype.constructor = TrackballControls;\nexport { TrackballControls };","map":{"version":3,"names":["EventDispatcher","MOUSE","Quaternion","Vector2","Vector3","TrackballControls","object","domElement","undefined","console","warn","document","error","scope","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","enabled","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","keys","mouseButtons","LEFT","MIDDLE","RIGHT","target","EPS","lastPosition","lastZoom","_state","_keyState","_eye","_movePrev","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","clone","position0","position","up0","up","zoom0","zoom","changeEvent","type","startEvent","endEvent","handleResize","box","getBoundingClientRect","d","ownerDocument","documentElement","window","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","set","getMouseOnCircle","rotateCamera","axis","quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","angle","x","y","length","copy","sub","normalize","crossVectors","setLength","add","setFromAxisAngle","applyQuaternion","Math","sqrt","zoomCamera","factor","isPerspectiveCamera","multiplyScalar","isOrthographicCamera","updateProjectionMatrix","panCamera","mouseChange","objectUp","pan","lengthSq","scale_x","right","clientWidth","scale_y","bottom","cross","subVectors","checkDistances","addVectors","update","lookAt","distanceToSquared","dispatchEvent","reset","onPointerDown","event","pointerType","onMouseDown","onPointerMove","onMouseMove","onPointerUp","onMouseUp","keydown","removeEventListener","keyCode","keyup","addEventListener","preventDefault","stopPropagation","button","state","mousewheel","deltaMode","deltaY","touchstart","touches","dx","dy","touchmove","touchend","contextmenu","dispose","prototype","Object","create","constructor"],"sources":["/Users/khuong/Downloads/avatar-homepage-demo-forked/node_modules/three/examples/jsm/controls/TrackballControls.js"],"sourcesContent":["import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tVector2,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar TrackballControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.TrackballControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.TrackballControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tvar scope = this;\n\tvar STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.ZOOM, RIGHT: MOUSE.PAN };\n\n\t// internals\n\n\tthis.target = new Vector3();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new Vector3();\n\tvar lastZoom = 1;\n\n\tvar _state = STATE.NONE,\n\t\t_keyState = STATE.NONE,\n\n\t\t_eye = new Vector3(),\n\n\t\t_movePrev = new Vector2(),\n\t\t_moveCurr = new Vector2(),\n\n\t\t_lastAxis = new Vector3(),\n\t\t_lastAngle = 0,\n\n\t\t_zoomStart = new Vector2(),\n\t\t_zoomEnd = new Vector2(),\n\n\t\t_touchZoomDistanceStart = 0,\n\t\t_touchZoomDistanceEnd = 0,\n\n\t\t_panStart = new Vector2(),\n\t\t_panEnd = new Vector2();\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.up0 = this.object.up.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\n\t// methods\n\n\tthis.handleResize = function () {\n\n\t\tvar box = scope.domElement.getBoundingClientRect();\n\t\t// adjustments come from similar code in the jquery offset() function\n\t\tvar d = scope.domElement.ownerDocument.documentElement;\n\t\tscope.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\tscope.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\tscope.screen.width = box.width;\n\t\tscope.screen.height = box.height;\n\n\t};\n\n\tvar getMouseOnScreen = ( function () {\n\n\t\tvar vector = new Vector2();\n\n\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( pageX - scope.screen.left ) / scope.screen.width,\n\t\t\t\t( pageY - scope.screen.top ) / scope.screen.height\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tvar getMouseOnCircle = ( function () {\n\n\t\tvar vector = new Vector2();\n\n\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( ( pageX - scope.screen.width * 0.5 - scope.screen.left ) / ( scope.screen.width * 0.5 ) ),\n\t\t\t\t( ( scope.screen.height + 2 * ( scope.screen.top - pageY ) ) / scope.screen.width ) // screen.width intentional\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tthis.rotateCamera = ( function () {\n\n\t\tvar axis = new Vector3(),\n\t\t\tquaternion = new Quaternion(),\n\t\t\teyeDirection = new Vector3(),\n\t\t\tobjectUpDirection = new Vector3(),\n\t\t\tobjectSidewaysDirection = new Vector3(),\n\t\t\tmoveDirection = new Vector3(),\n\t\t\tangle;\n\n\t\treturn function rotateCamera() {\n\n\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\tangle = moveDirection.length();\n\n\t\t\tif ( angle ) {\n\n\t\t\t\t_eye.copy( scope.object.position ).sub( scope.target );\n\n\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\tobjectUpDirection.copy( scope.object.up ).normalize();\n\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\n\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\n\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\n\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\n\t\t\t\tangle *= scope.rotateSpeed;\n\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\tscope.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t_lastAxis.copy( axis );\n\t\t\t\t_lastAngle = angle;\n\n\t\t\t} else if ( ! scope.staticMoving && _lastAngle ) {\n\n\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - scope.dynamicDampingFactor );\n\t\t\t\t_eye.copy( scope.object.position ).sub( scope.target );\n\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\tscope.object.up.applyQuaternion( quaternion );\n\n\t\t\t}\n\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t};\n\n\t}() );\n\n\n\tthis.zoomCamera = function () {\n\n\t\tvar factor;\n\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom *= factor;\n\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * scope.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscope.object.zoom /= factor;\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( scope.staticMoving ) {\n\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = ( function () {\n\n\t\tvar mouseChange = new Vector2(),\n\t\t\tobjectUp = new Vector3(),\n\t\t\tpan = new Vector3();\n\n\t\treturn function panCamera() {\n\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\tif ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tvar scale_x = ( scope.object.right - scope.object.left ) / scope.object.zoom / scope.domElement.clientWidth;\n\t\t\t\t\tvar scale_y = ( scope.object.top - scope.object.bottom ) / scope.object.zoom / scope.domElement.clientWidth;\n\n\t\t\t\t\tmouseChange.x *= scale_x;\n\t\t\t\t\tmouseChange.y *= scale_y;\n\n\t\t\t\t}\n\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * scope.panSpeed );\n\n\t\t\t\tpan.copy( _eye ).cross( scope.object.up ).setLength( mouseChange.x );\n\t\t\t\tpan.add( objectUp.copy( scope.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\tscope.object.position.add( pan );\n\t\t\t\tscope.target.add( pan );\n\n\t\t\t\tif ( scope.staticMoving ) {\n\n\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( scope.dynamicDampingFactor ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.checkDistances = function () {\n\n\t\tif ( ! scope.noZoom || ! scope.noPan ) {\n\n\t\t\tif ( _eye.lengthSq() > scope.maxDistance * scope.maxDistance ) {\n\n\t\t\t\tscope.object.position.addVectors( scope.target, _eye.setLength( scope.maxDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( _eye.lengthSq() < scope.minDistance * scope.minDistance ) {\n\n\t\t\t\tscope.object.position.addVectors( scope.target, _eye.setLength( scope.minDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function () {\n\n\t\t_eye.subVectors( scope.object.position, scope.target );\n\n\t\tif ( ! scope.noRotate ) {\n\n\t\t\tscope.rotateCamera();\n\n\t\t}\n\n\t\tif ( ! scope.noZoom ) {\n\n\t\t\tscope.zoomCamera();\n\n\t\t}\n\n\t\tif ( ! scope.noPan ) {\n\n\t\t\tscope.panCamera();\n\n\t\t}\n\n\t\tscope.object.position.addVectors( scope.target, _eye );\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscope.checkDistances();\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( lastPosition.distanceToSquared( scope.object.position ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\n\t\t\t}\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( lastPosition.distanceToSquared( scope.object.position ) > EPS || lastZoom !== scope.object.zoom ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastZoom = scope.object.zoom;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\t_state = STATE.NONE;\n\t\t_keyState = STATE.NONE;\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.up.copy( scope.up0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\n\t\t_eye.subVectors( scope.object.position, scope.target );\n\n\t\tscope.object.lookAt( scope.target );\n\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tlastPosition.copy( scope.object.position );\n\t\tlastZoom = scope.object.zoom;\n\n\t};\n\n\t// listeners\n\n\tfunction onPointerDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseDown( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseMove( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseUp( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction keydown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\tif ( _keyState !== STATE.NONE ) {\n\n\t\t\treturn;\n\n\t\t} else if ( event.keyCode === scope.keys[ STATE.ROTATE ] && ! scope.noRotate ) {\n\n\t\t\t_keyState = STATE.ROTATE;\n\n\t\t} else if ( event.keyCode === scope.keys[ STATE.ZOOM ] && ! scope.noZoom ) {\n\n\t\t\t_keyState = STATE.ZOOM;\n\n\t\t} else if ( event.keyCode === scope.keys[ STATE.PAN ] && ! scope.noPan ) {\n\n\t\t\t_keyState = STATE.PAN;\n\n\t\t}\n\n\t}\n\n\tfunction keyup() {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\t_keyState = STATE.NONE;\n\n\t\twindow.addEventListener( 'keydown', keydown, false );\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.NONE ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase scope.mouseButtons.LEFT:\n\t\t\t\t\t_state = STATE.ROTATE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.mouseButtons.MIDDLE:\n\t\t\t\t\t_state = STATE.ZOOM;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.mouseButtons.RIGHT:\n\t\t\t\t\t_state = STATE.PAN;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t_state = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\tif ( state === STATE.ROTATE && ! scope.noRotate ) {\n\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t} else if ( state === STATE.ZOOM && ! scope.noZoom ) {\n\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t} else if ( state === STATE.PAN && ! scope.noPan ) {\n\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_panEnd.copy( _panStart );\n\n\t\t}\n\n\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove, false );\n\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp, false );\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\tif ( state === STATE.ROTATE && ! scope.noRotate ) {\n\n\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t} else if ( state === STATE.ZOOM && ! scope.noZoom ) {\n\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t} else if ( state === STATE.PAN && ! scope.noPan ) {\n\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction mousewheel( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tif ( scope.noZoom === true ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.deltaMode ) {\n\n\t\t\tcase 2:\n\t\t\t\t// Zoom in pages\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t// Zoom in lines\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// undefined, 0, assume pixels\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tscope.dispatchEvent( startEvent );\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 0:\n\t\t\t\t_state = STATE.NONE;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction contextmenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\n\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', mousewheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', touchend, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp, false );\n\n\t\twindow.removeEventListener( 'keydown', keydown, false );\n\t\twindow.removeEventListener( 'keyup', keyup, false );\n\n\t};\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\n\tthis.domElement.addEventListener( 'pointerdown', onPointerDown, false );\n\tthis.domElement.addEventListener( 'wheel', mousewheel, false );\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\tthis.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove, false );\n\tthis.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp, false );\n\n\twindow.addEventListener( 'keydown', keydown, false );\n\twindow.addEventListener( 'keyup', keyup, false );\n\n\tthis.handleResize();\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTrackballControls.prototype = Object.create( EventDispatcher.prototype );\nTrackballControls.prototype.constructor = TrackballControls;\n\nexport { TrackballControls };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}