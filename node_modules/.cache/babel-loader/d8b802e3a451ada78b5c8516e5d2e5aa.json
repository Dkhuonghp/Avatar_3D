{"ast":null,"code":"import _slicedToArray from \"/Users/khuong/Downloads/avatar-homepage-demo-forked/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { forwardRef, useRef, useMemo, createElement } from 'react';\nimport { useThree, useFrame } from 'react-three-fiber';\nimport { WebGLRenderTarget, PlaneBufferGeometry, Mesh, MeshDepthMaterial, ShaderMaterial } from 'three';\nimport { HorizontalBlurShader } from 'three/examples/jsm/shaders/HorizontalBlurShader';\nimport { VerticalBlurShader } from 'three/examples/jsm/shaders/VerticalBlurShader';\nvar ContactShadows = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$opacity = _ref.opacity,\n      opacity = _ref$opacity === void 0 ? 1 : _ref$opacity,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 1 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 1 : _ref$height,\n      _ref$blur = _ref.blur,\n      blur = _ref$blur === void 0 ? 1 : _ref$blur,\n      _ref$far = _ref.far,\n      far = _ref$far === void 0 ? 10 : _ref$far,\n      _ref$resolution = _ref.resolution,\n      resolution = _ref$resolution === void 0 ? 256 : _ref$resolution,\n      props = _objectWithoutPropertiesLoose(_ref, [\"opacity\", \"width\", \"height\", \"blur\", \"far\", \"resolution\"]);\n\n  var _useThree = useThree(),\n      scene = _useThree.scene,\n      gl = _useThree.gl;\n\n  var shadowCamera = useRef();\n\n  var _useMemo = useMemo(function () {\n    var renderTarget = new WebGLRenderTarget(resolution, resolution);\n    var renderTargetBlur = new WebGLRenderTarget(resolution, resolution);\n    renderTargetBlur.texture.generateMipmaps = renderTarget.texture.generateMipmaps = false;\n    var planeGeometry = new PlaneBufferGeometry(width, height).rotateX(Math.PI / 2);\n    var blurPlane = new Mesh(planeGeometry);\n    var depthMaterial = new MeshDepthMaterial();\n    depthMaterial.depthTest = depthMaterial.depthWrite = false;\n\n    depthMaterial.onBeforeCompile = function (shader) {\n      return shader.fragmentShader = shader.fragmentShader.replace('1.0 - fragCoordZ ), opacity );', '0.0 ), ( 1.0 - fragCoordZ ) * 1.0 );');\n    };\n\n    var horizontalBlurMaterial = new ShaderMaterial(HorizontalBlurShader);\n    var verticalBlurMaterial = new ShaderMaterial(VerticalBlurShader);\n    verticalBlurMaterial.depthTest = horizontalBlurMaterial.depthTest = false;\n    return [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur];\n  }, [resolution, width, height]),\n      _useMemo2 = _slicedToArray(_useMemo, 7),\n      renderTarget = _useMemo2[0],\n      planeGeometry = _useMemo2[1],\n      depthMaterial = _useMemo2[2],\n      blurPlane = _useMemo2[3],\n      horizontalBlurMaterial = _useMemo2[4],\n      verticalBlurMaterial = _useMemo2[5],\n      renderTargetBlur = _useMemo2[6];\n\n  useFrame(function () {\n    if (shadowCamera.current) {\n      var initialBackground = scene.background;\n      scene.background = null;\n      scene.overrideMaterial = depthMaterial;\n      gl.setRenderTarget(renderTarget);\n      gl.render(scene, shadowCamera.current);\n      scene.overrideMaterial = null;\n      blurPlane.material = horizontalBlurMaterial;\n      blurPlane.material.uniforms.tDiffuse.value = renderTarget.texture;\n      horizontalBlurMaterial.uniforms.h.value = blur / 256;\n      gl.setRenderTarget(renderTargetBlur);\n      gl.render(blurPlane, shadowCamera.current);\n      blurPlane.material = verticalBlurMaterial;\n      blurPlane.material.uniforms.tDiffuse.value = renderTargetBlur.texture;\n      verticalBlurMaterial.uniforms.v.value = blur / 256;\n      gl.setRenderTarget(renderTarget);\n      gl.render(blurPlane, shadowCamera.current);\n      gl.setRenderTarget(null);\n      scene.background = initialBackground;\n    }\n  });\n  return /*#__PURE__*/createElement(\"group\", _extends({}, props, {\n    ref: ref\n  }), /*#__PURE__*/createElement(\"mesh\", {\n    geometry: planeGeometry,\n    scale: [1, -1, 1],\n    rotation: [-Math.PI / 2, 0, 0]\n  }, /*#__PURE__*/createElement(\"meshBasicMaterial\", {\n    map: renderTarget.texture,\n    transparent: true,\n    opacity: opacity\n  })), /*#__PURE__*/createElement(\"orthographicCamera\", {\n    ref: shadowCamera,\n    args: [-width / 2, width / 2, height / 2, -height / 2, 0, far]\n  }));\n});\nexport { ContactShadows };","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","forwardRef","useRef","useMemo","createElement","useThree","useFrame","WebGLRenderTarget","PlaneBufferGeometry","Mesh","MeshDepthMaterial","ShaderMaterial","HorizontalBlurShader","VerticalBlurShader","ContactShadows","_ref","ref","opacity","width","height","blur","far","resolution","props","scene","gl","shadowCamera","renderTarget","renderTargetBlur","texture","generateMipmaps","planeGeometry","rotateX","Math","PI","blurPlane","depthMaterial","depthTest","depthWrite","onBeforeCompile","shader","fragmentShader","replace","horizontalBlurMaterial","verticalBlurMaterial","current","initialBackground","background","overrideMaterial","setRenderTarget","render","material","uniforms","tDiffuse","value","h","v","geometry","scale","rotation","map","transparent","args"],"sources":["/Users/khuong/Downloads/avatar-homepage-demo-forked/node_modules/@react-three/drei/ContactShadows.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { forwardRef, useRef, useMemo, createElement } from 'react';\nimport { useThree, useFrame } from 'react-three-fiber';\nimport { WebGLRenderTarget, PlaneBufferGeometry, Mesh, MeshDepthMaterial, ShaderMaterial } from 'three';\nimport { HorizontalBlurShader } from 'three/examples/jsm/shaders/HorizontalBlurShader';\nimport { VerticalBlurShader } from 'three/examples/jsm/shaders/VerticalBlurShader';\n\nconst ContactShadows = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    opacity = 1,\n    width = 1,\n    height = 1,\n    blur = 1,\n    far = 10,\n    resolution = 256\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"opacity\", \"width\", \"height\", \"blur\", \"far\", \"resolution\"]);\n\n  const {\n    scene,\n    gl\n  } = useThree();\n  const shadowCamera = useRef();\n  const [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur] = useMemo(() => {\n    const renderTarget = new WebGLRenderTarget(resolution, resolution);\n    const renderTargetBlur = new WebGLRenderTarget(resolution, resolution);\n    renderTargetBlur.texture.generateMipmaps = renderTarget.texture.generateMipmaps = false;\n    const planeGeometry = new PlaneBufferGeometry(width, height).rotateX(Math.PI / 2);\n    const blurPlane = new Mesh(planeGeometry);\n    const depthMaterial = new MeshDepthMaterial();\n    depthMaterial.depthTest = depthMaterial.depthWrite = false;\n\n    depthMaterial.onBeforeCompile = shader => shader.fragmentShader = shader.fragmentShader.replace('1.0 - fragCoordZ ), opacity );', '0.0 ), ( 1.0 - fragCoordZ ) * 1.0 );');\n\n    const horizontalBlurMaterial = new ShaderMaterial(HorizontalBlurShader);\n    const verticalBlurMaterial = new ShaderMaterial(VerticalBlurShader);\n    verticalBlurMaterial.depthTest = horizontalBlurMaterial.depthTest = false;\n    return [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur];\n  }, [resolution, width, height]);\n  useFrame(() => {\n    if (shadowCamera.current) {\n      const initialBackground = scene.background;\n      scene.background = null;\n      scene.overrideMaterial = depthMaterial;\n      gl.setRenderTarget(renderTarget);\n      gl.render(scene, shadowCamera.current);\n      scene.overrideMaterial = null;\n      blurPlane.material = horizontalBlurMaterial;\n      blurPlane.material.uniforms.tDiffuse.value = renderTarget.texture;\n      horizontalBlurMaterial.uniforms.h.value = blur / 256;\n      gl.setRenderTarget(renderTargetBlur);\n      gl.render(blurPlane, shadowCamera.current);\n      blurPlane.material = verticalBlurMaterial;\n      blurPlane.material.uniforms.tDiffuse.value = renderTargetBlur.texture;\n      verticalBlurMaterial.uniforms.v.value = blur / 256;\n      gl.setRenderTarget(renderTarget);\n      gl.render(blurPlane, shadowCamera.current);\n      gl.setRenderTarget(null);\n      scene.background = initialBackground;\n    }\n  });\n  return /*#__PURE__*/createElement(\"group\", _extends({}, props, {\n    ref: ref\n  }), /*#__PURE__*/createElement(\"mesh\", {\n    geometry: planeGeometry,\n    scale: [1, -1, 1],\n    rotation: [-Math.PI / 2, 0, 0]\n  }, /*#__PURE__*/createElement(\"meshBasicMaterial\", {\n    map: renderTarget.texture,\n    transparent: true,\n    opacity: opacity\n  })), /*#__PURE__*/createElement(\"orthographicCamera\", {\n    ref: shadowCamera,\n    args: [-width / 2, width / 2, height / 2, -height / 2, 0, far]\n  }));\n});\n\nexport { ContactShadows };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}