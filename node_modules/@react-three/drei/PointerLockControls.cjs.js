'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _extends = require('@babel/runtime/helpers/extends');
var React = require('react');
var reactThreeFiber = require('react-three-fiber');
var useEffectfulState = require('./useEffectfulState-8ab6864f.js');
var PointerLockControls$1 = require('three/examples/jsm/controls/PointerLockControls');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var _extends__default = /*#__PURE__*/_interopDefaultLegacy(_extends);

var PointerLockControls = /*#__PURE__*/React.forwardRef(function (props, ref) {
  var _useThree = reactThreeFiber.useThree(),
      camera = _useThree.camera,
      gl = _useThree.gl,
      invalidate = _useThree.invalidate;

  var controls = useEffectfulState.useEffectfulState(function () {
    return new PointerLockControls$1.PointerLockControls(camera, gl.domElement);
  }, [camera, gl.domElement], ref);
  React.useEffect(function () {
    controls == null ? void 0 : controls.addEventListener == null ? void 0 : controls.addEventListener('change', invalidate);
    return function () {
      return controls == null ? void 0 : controls.removeEventListener == null ? void 0 : controls.removeEventListener('change', invalidate);
    };
  }, [controls, invalidate]);
  React.useEffect(function () {
    var handler = function handler() {
      return controls == null ? void 0 : controls.lock();
    };

    document.addEventListener('click', handler);
    return function () {
      return document.removeEventListener('click', handler);
    };
  }, [controls]);
  return controls ? /*#__PURE__*/React.createElement("primitive", _extends__default['default']({
    dispose: undefined,
    object: controls
  }, props)) : null;
});

exports.PointerLockControls = PointerLockControls;
