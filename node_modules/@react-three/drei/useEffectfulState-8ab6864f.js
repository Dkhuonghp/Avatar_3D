'use strict';

var React = require('react');

function call(ref, value) {
  if (typeof ref === 'function') ref(value);else if (ref != null) ref.current = value;
}

function useEffectfulState(fn, deps, cb) {
  if (deps === void 0) {
    deps = [];
  }

  var _React$useState = React.useState(),
      state = _React$useState[0],
      set = _React$useState[1];

  React.useLayoutEffect(function () {
    var value = fn();
    set(value);
    call(cb, value);
    return function () {
      return call(cb, null);
    }; // eslint-disable-next-line react-hooks/exhaustive-deps
  }, deps);
  return state;
}

exports.useEffectfulState = useEffectfulState;
